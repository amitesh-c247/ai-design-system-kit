# Form Handling Patterns

## Form Libraries
- **React Hook Form**: Primary form library for state management
- **@hookform/resolvers**: Integration between React Hook Form and validation

## Form Component Pattern
```typescript
import React from 'react';
import { useForm } from 'react-hook-form';
import { Button } from '@/components/pure-components/Button';
import { Input } from '@/components/pure-components/Form/Input';
import styles from './UserForm.module.scss';

interface UserFormProps {
  onSubmit: (data: UserFormData) => void;
  initialData?: Partial<UserFormData>;
  isLoading?: boolean;
}

const UserForm: React.FC<UserFormProps> = ({
  onSubmit,
  initialData,
  isLoading = false,
}) => {
  const {
    register,
    handleSubmit,
    formState: { errors, isSubmitting },
    reset,
  } = useForm<UserFormData>({
    defaultValues: initialData,
  });

  const onSubmitHandler = async (data: UserFormData) => {
    try {
      await onSubmit(data);
      reset();
    } catch (error) {
      // Error handling
    }
  };

  return (
    <form onSubmit={handleSubmit(onSubmitHandler)} className={styles.form}>
      <Input
        label="Name"
        {...register('name')}
        error={errors.name?.message}
        disabled={isLoading}
      />
      
      <Input
        label="Email"
        type="email"
        {...register('email')}
        error={errors.email?.message}
        disabled={isLoading}
      />
      
      <Input
        label="Password"
        type="password"
        {...register('password')}
        error={errors.password?.message}
        disabled={isLoading}
      />
      
      <Button
        type="submit"
        variant="primary"
        disabled={isSubmitting || isLoading}
        loading={isSubmitting}
      >
        {isSubmitting ? 'Saving...' : 'Save User'}
      </Button>
    </form>
  );
};

export default UserForm;
```

## Form Hook Pattern
```typescript
// src/hooks/useUserForm.ts
import { useForm } from 'react-hook-form';
import { userSchema, UserFormData } from '@/constants/validation';

export const useUserForm = (initialData?: Partial<UserFormData>) => {
  return useForm<UserFormData>({
    defaultValues: initialData,
    mode: 'onBlur', // Validate on blur
  });
};
```

## Error Handling
- **Field-level errors**: Display errors below each field
- **Form-level errors**: Show general form errors at the top
- **Server errors**: Handle API validation errors
- **Loading states**: Disable form during submission

## Accessibility
- **Labels**: Always provide proper labels for form fields
- **Error announcements**: Use ARIA live regions for error messages
- **Focus management**: Maintain proper focus order
- **Keyboard navigation**: Ensure all form elements are keyboard accessible
description:
globs:
alwaysApply: false
---
